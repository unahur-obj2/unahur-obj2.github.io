---
// Componente moderno para horarios con colores UNAHUR
export interface Props {
	comision: string
	modalidad?: string
	dia: string
	hora: string
	url?: string
	aula?: string
	edificio?: string
	mensaje?: string
}

const { comision, modalidad, dia, hora, url, aula, edificio, mensaje } =
	Astro.props

// Iconos SVG
const videoIcon = `<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"/></svg>`
const locationIcon = `<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/></svg>`
const clockIcon = `<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>`
const calendarIcon = `<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg>`
const infoIcon = `<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>`
const linkIcon = `<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"/></svg>`
---

<article
	class="group relative mx-auto flex h-full min-h-[320px] w-full flex-col rounded-xl border border-gray-200 bg-white p-6 shadow-lg transition-all duration-300 hover:scale-105 hover:shadow-xl dark:border-gray-700 dark:bg-gray-800">
	<!-- Header con comisión y modalidad -->
	<div class="mb-4 flex-shrink-0">
		<div class="mb-2 flex items-center gap-3">
			<h3 class="text-xl font-bold text-unahur-primary dark:text-unahur-accent">
				{comision}
			</h3>
			{
				modalidad && (
					<span class="rounded-full bg-unahur-light px-3 py-1 text-sm font-medium text-unahur-primary dark:bg-unahur-primary/20 dark:text-unahur-accent">
						{modalidad}
					</span>
				)
			}
		</div>
	</div>

	<!-- Información de horario -->
	<div class="mb-4 flex-shrink-0 space-y-3">
		<div class="flex items-center gap-3 text-gray-700 dark:text-gray-300">
			<span
				set:html={calendarIcon}
				class="text-unahur-primary dark:text-unahur-accent"
			/>
			<span class="font-medium">{dia}</span>
		</div>

		<div class="flex items-center gap-3 text-gray-700 dark:text-gray-300">
			<span
				set:html={clockIcon}
				class="text-unahur-primary dark:text-unahur-accent"
			/>
			<span class="font-medium">{hora}</span>
		</div>
	</div>

	<!-- Contenido variable que crece -->
	<div class="mb-4 flex-grow space-y-4">
		<!-- Ubicación (si está presente) -->
		{
			(aula || edificio) && (
				<div class="rounded-lg bg-gray-50 p-4 dark:bg-gray-700/50">
					<div class="flex items-start gap-3">
						<span
							set:html={locationIcon}
							class="mt-0.5 text-unahur-primary dark:text-unahur-accent"
						/>
						<div class="space-y-1">
							{aula && (
								<p class="font-semibold text-gray-900 dark:text-white">
									{aula}
								</p>
							)}
							{edificio && (
								<p class="text-gray-600 dark:text-gray-300">{edificio}</p>
							)}
						</div>
					</div>
				</div>
			)
		}

		<!-- Mensaje informativo -->
		{
			mensaje && (
				<div class="rounded-lg border border-blue-200 bg-blue-50 p-4 dark:border-blue-800 dark:bg-blue-900/30">
					<div class="flex items-start gap-3">
						<span
							set:html={infoIcon}
							class="mt-0.5 text-blue-600 dark:text-blue-400"
						/>
						<p class="text-sm leading-relaxed text-blue-700 dark:text-blue-300">
							{mensaje}
						</p>
					</div>
				</div>
			)
		}
	</div>

	<!-- Botón de unirse (si hay URL) -->
	{
		url && (
			<div class="mt-auto flex-shrink-0">
				<a
					href={url}
					target="_blank"
					rel="noopener noreferrer"
					class="inline-flex w-full transform items-center justify-center gap-3 rounded-lg bg-gradient-to-r from-unahur-primary to-unahur-secondary px-6 py-4 font-semibold text-white transition-all duration-300 hover:scale-105 hover:from-unahur-secondary hover:to-unahur-primary hover:shadow-lg group-hover:animate-pulse">
					<span set:html={videoIcon} />
					<span>Unirse a la clase</span>
					<span set:html={linkIcon} />
				</a>
			</div>
		)
	}

	<!-- Efecto decorativo -->
	<div
		class="pointer-events-none absolute inset-0 rounded-xl bg-gradient-to-br from-unahur-primary/5 to-transparent opacity-0 transition-opacity duration-300 group-hover:opacity-100">
	</div>
</article>

<style>
	/* Animación sutil para el hover */
	@keyframes gentle-pulse {
		0%,
		100% {
			opacity: 1;
		}
		50% {
			opacity: 0.9;
		}
	}

	.group:hover .group-hover\:animate-pulse {
		animation: gentle-pulse 2s ease-in-out infinite;
	}
</style>
