---
import { Breadcrumbs } from 'accessible-astro-components'
import { BreadcrumbsItem } from 'accessible-astro-components'
import {
	PATH,
	PATH_CURSADA_VIERNES,
	PATH_CURSADA2025c1_MIERCOLES,
} from '@/paths.js'
import LayoutSemanas from './LayoutSemanas.astro'
import VideosDeSemana from '@components/VideosDeSemana.astro'
import ActividadesDeSemana from '@components/ActividadesDeSemana.astro'
import HorariosDeSemana from '@components/HorariosDeSemana.astro'
import CardSecciones from '@/components/CardSecciones.astro'

const { frontmatter } = Astro.props

const { title, videos, horarios, ejercicios, atencion, importante } =
	frontmatter

const currentUrl = Astro.url.pathname
let PATH_CURSADA = PATH_CURSADA_VIERNES
let cursadaLabel = 'comision 1/3 Viernes'

if (currentUrl.includes('/comision-2-4-miercoles/')) {
	PATH_CURSADA = PATH_CURSADA2025c1_MIERCOLES
	cursadaLabel = 'comision 2/4 Miércoles'
}
---

<LayoutSemanas title={title}>
	<div class="container">
		<div
			class="animate-on-load mt-12"
			data-animate="fade-in-down">
			<Breadcrumbs>
				<BreadcrumbsItem
					href={PATH}
					label="Inicio"
				/>
				<BreadcrumbsItem
					href={PATH_CURSADA}
					label={cursadaLabel}
				/>
				<BreadcrumbsItem
					currentPage={true}
					label={title}
				/>
			</Breadcrumbs>
		</div>
	</div>

	<div class="container">
		<div class="content-container my-12">
			<h1 class="content-title pb-3">
				{title}
			</h1>
			{
				atencion ? (
					<div class="content-section">
						<CardSecciones
							title="Atención"
							atencion>
							{atencion}
						</CardSecciones>
					</div>
				) : null
			}
			{
				importante ? (
					<div class="content-section">
						<CardSecciones
							title="Importante"
							importante>
							{importante}
						</CardSecciones>
					</div>
				) : null
			}
			<div class="content-section pb-2">
				<slot />
			</div>
			{
				horarios && horarios.length > 0 ? (
					<div class="content-section">
						<HorariosDeSemana horarios={horarios} />
					</div>
				) : null
			}
			{
				videos && videos.length > 0 && (
					<div class="content-section">
						<VideosDeSemana
							titulo="Videos"
							videos={videos}
						/>
					</div>
				)
			}
			{
				ejercicios && ejercicios.length > 0 ? (
					<div class="content-section">
						<ActividadesDeSemana ejercicios={ejercicios} />
					</div>
				) : (
					<div class="content-section">
						<CardSecciones title="Ejercicios">
							<p class="m-auto flex w-full text-center">
								<strong>Esta semana no hay ejercicios</strong>
							</p>
						</CardSecciones>
					</div>
				)
			}
		</div>
	</div>
</LayoutSemanas>

<style>
	.content-container {
		animation: fadeInContainer 0.7s ease-out;
	}

	.content-title {
		animation: slideInTitle 0.6s ease-out 0.1s both;
	}

	.content-section {
		animation: fadeInSection 0.5s ease-out both;
	}

	.content-section:nth-child(2) {
		animation-delay: 0.2s;
	}
	.content-section:nth-child(3) {
		animation-delay: 0.3s;
	}
	.content-section:nth-child(4) {
		animation-delay: 0.4s;
	}
	.content-section:nth-child(5) {
		animation-delay: 0.5s;
	}
	.content-section:nth-child(6) {
		animation-delay: 0.6s;
	}
	.content-section:nth-child(7) {
		animation-delay: 0.7s;
	}

	@keyframes fadeInContainer {
		from {
			opacity: 0;
		}
		to {
			opacity: 1;
		}
	}

	@keyframes slideInTitle {
		from {
			opacity: 0;
			transform: translateY(-15px);
		}
		to {
			opacity: 1;
			transform: translateY(0);
		}
	}

	@keyframes fadeInSection {
		from {
			opacity: 0;
			transform: translateY(10px);
		}
		to {
			opacity: 1;
			transform: translateY(0);
		}
	}

	@media (prefers-reduced-motion: reduce) {
		.content-container,
		.content-title,
		.content-section {
			animation: none;
		}
	}

	@media (max-width: 768px) {
		.content-section {
			animation-duration: 0.3s;
		}
	}
</style>
