---
import AsideMenu from '@components/AsideMenu.astro'
import DefaultLayout from './DefaultLayout.astro'

const currentUrl = Astro.url.pathname
let semanas = []

if (currentUrl.includes('/comision-1-3-viernes/')) {
	semanas = await Astro.glob('../pages/comision-1-3-viernes/*.md')
} else if (currentUrl.includes('/comision-2-4-miercoles/')) {
	semanas = await Astro.glob('../pages/comision-2-4-miercoles/*.md')
} else if (currentUrl.includes('/cursada2025C1/')) {
	semanas = await Astro.glob('../pages/cursada2025C1/*.md')
} else {
	try {
		semanas = await Astro.glob('../pages/comision-1-3-viernes/*.md')
	} catch (e) {
		semanas = []
	}
}

semanas = semanas.reverse().filter((semana) => {
	return semana.frontmatter.mostrar
})

const { title } = Astro.props
---

<DefaultLayout title={title}>
	<div class="flex">
		<aside
			class="aside-menu sticky left-0 top-0 h-screen w-48 rounded-lg bg-gradient-to-t from-slate-200 to-[--background] dark:from-zinc-800 dark:to-[--background]">
			<AsideMenu
				title="Semanas"
				data={semanas}
			/>
		</aside>
		<div class="main-content sm:m-auto">
			<slot />
		</div>
	</div>
</DefaultLayout>

<style>
	.aside-menu {
		animation: slideInLeft 0.5s ease-out;
	}

	.main-content {
		animation: fadeInContent 0.6s ease-out 0.2s both;
	}

	@keyframes slideInLeft {
		from {
			opacity: 0;
			transform: translateX(-20px);
		}
		to {
			opacity: 1;
			transform: translateX(0);
		}
	}

	@keyframes fadeInContent {
		from {
			opacity: 0;
			transform: translateY(10px);
		}
		to {
			opacity: 1;
			transform: translateY(0);
		}
	}

	@media (max-width: 775px) {
		aside {
			display: none;
		}
	}
	@media (max-width: 1200px) {
		aside {
			min-width: 8rem;
		}
	}

	@media (prefers-reduced-motion: reduce) {
		.aside-menu,
		.main-content {
			animation: none;
		}
	}
</style>
